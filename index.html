<!doctype html><html lang="zh" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><link rel="canonical" href="http://flubucore.dotnetcore.xyz/"><meta name="lang:clipboard.copy" content="复制"><meta name="lang:clipboard.copied" content="已复制"><meta name="lang:search.language" content="ja"><meta name="lang:search.pipeline.stopwords" content="True"><meta name="lang:search.pipeline.trimmer" content="True"><meta name="lang:search.result.none" content="没有找到符合条件的结果"><meta name="lang:search.result.one" content="找到 1 个符合条件的结果"><meta name="lang:search.result.other" content="# 个符合条件的结果"><meta name="lang:search.tokenizer" content="[\uff0c\u3002]+"><link rel="shortcut icon" href="assets/images/favicon.png"><meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.3.1"><title>FlubuCore</title><link rel="stylesheet" href="assets/stylesheets/application.4031d38b.css"><link rel="stylesheet" href="assets/stylesheets/application-palette.224b79ff.css"><meta name="theme-color" content="#3f51b5"><script src="assets/javascripts/modernizr.74668098.js"></script><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|&display=swap"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style><link rel="stylesheet" href="assets/fonts/material-icons.css"></head><body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo"><svg class="md-svg"><defs><svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg></defs></svg> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" data-md-component="overlay" for="__drawer"></label><a href="#flubucore" tabindex="1" class="md-skip">跳转至 </a><header class="md-header" data-md-component="header"><nav class="md-header-nav md-grid"><div class="md-flex"><div class="md-flex__cell md-flex__cell--shrink"><a href="http://flubucore.dotnetcore.xyz" title="FlubuCore" class="md-header-nav__button md-logo"><i class="md-icon"></i></a></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label></div><div class="md-flex__cell md-flex__cell--stretch"><div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">FlubuCore</div></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--search md-header-nav__button" for="__search"></label><div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active"> <label class="md-icon md-search__icon" for="__search"></label> <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button></form><div class="md-search__output"><div class="md-search__scrollwrap" data-md-scrollfix><div class="md-search-result" data-md-component="result"><div class="md-search-result__meta">键入以开始搜索</div><ol class="md-search-result__list"></ol></div></div></div></div></div></div><div class="md-flex__cell md-flex__cell--shrink"><div class="md-header-nav__source"><a href="https://github.com/dotnetcore/FlubuCore/" title="前往 Github 仓库" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">GitHub</div></a></div></div></div></nav></header><div class="md-container"><nav class="md-tabs" data-md-component="tabs"><div class="md-tabs__inner md-grid"><ul class="md-tabs__list"><li class="md-tabs__item"><a href="." title="FlubuCore" class="md-tabs__link md-tabs__link--active">FlubuCore</a></li><li class="md-tabs__item"><a href="WebApi/getting-started/" title="Web Api" class="md-tabs__link">Web Api</a></li><li class="md-tabs__item"><a href="AwesomePlugins/awesome-plugins/" title="插件精选" class="md-tabs__link">插件精选</a></li><li class="md-tabs__item"><a href="https://github.com/dotnetcore/FlubuCore.Examples" title="示例" class="md-tabs__link">示例</a></li><li class="md-tabs__item"><a href="https://flubucore.dotnetcore.xyz/" title="English" class="md-tabs__link">English</a></li></ul></div></nav><main class="md-main"><div class="md-main__inner md-grid" data-md-component="container"><div class="md-sidebar md-sidebar--primary" data-md-component="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary" data-md-level="0"><label class="md-nav__title md-nav__title--site" for="__drawer"><a href="http://flubucore.dotnetcore.xyz" title="FlubuCore" class="md-nav__button md-logo"><i class="md-icon"></i></a>FlubuCore</label><div class="md-nav__source"><a href="https://github.com/dotnetcore/FlubuCore/" title="前往 Github 仓库" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">GitHub</div></a></div><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item md-nav__item--active"><input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc"><label class="md-nav__link md-nav__link--active" for="__toc">FlubuCore</label><a href="." title="FlubuCore" class="md-nav__link md-nav__link--active">FlubuCore</a><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">目录</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#_1" title="概述" class="md-nav__link">概述</a></li><li class="md-nav__item"><a href="#_2" title="功能与优势" class="md-nav__link">功能与优势</a></li><li class="md-nav__item"><a href="#_3" title="入门" class="md-nav__link">入门</a></li><li class="md-nav__item"><a href="#_4" title="范例" class="md-nav__link">范例</a></li><li class="md-nav__item"><a href="#_5" title="疑惑？" class="md-nav__link">疑惑？</a></li><li class="md-nav__item"><a href="#_6" title="贡献" class="md-nav__link">贡献</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#_7" title="如何作出贡献" class="md-nav__link">如何作出贡献</a></li></ul></nav></li><li class="md-nav__item"><a href="#further-development" title="Further Development" class="md-nav__link">Further Development</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#backers-and-sponsors" title="Backers and Sponsors" class="md-nav__link">Backers and Sponsors</a></li></ul></nav></li><li class="md-nav__item"><a href="#_8" title="更新日志与路线图" class="md-nav__link">更新日志与路线图</a></li></ul></nav></li><li class="md-nav__item"><a href="getting-started/" title="入门" class="md-nav__link">入门</a></li><li class="md-nav__item"><a href="buildscript-fundamentals/" title="构建脚本基础" class="md-nav__link">构建脚本基础</a></li><li class="md-nav__item"><a href="build-script-runner/" title="构建脚本运行器" class="md-nav__link">构建脚本运行器</a></li><li class="md-nav__item"><a href="build-script-runner-interactive/" title="构建脚本运行器交互模式" class="md-nav__link">构建脚本运行器交互模式</a></li><li class="md-nav__item"><a href="referencing-external-assemblies/" title="在构建脚本中引用外部程序集" class="md-nav__link">在构建脚本中引用外部程序集</a></li><li class="md-nav__item"><a href="override-add-options/" title="覆盖现有选项或通过控制台向任务添加其他选项" class="md-nav__link">覆盖现有选项或通过控制台向任务添加其他选项</a></li><li class="md-nav__item"><a href="tasks/" title="任务" class="md-nav__link">任务</a></li><li class="md-nav__item"><a href="write-plugins/" title="编写与使用插件" class="md-nav__link">编写与使用插件</a></li><li class="md-nav__item"><a href="Tests-debugging/" title="测试与调试" class="md-nav__link">测试与调试</a></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11"><label class="md-nav__link" for="nav-11">Web Api</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-11">Web Api</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="WebApi/getting-started/" title="入门" class="md-nav__link">入门</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12"><label class="md-nav__link" for="nav-12">插件精选</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-12">插件精选</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="AwesomePlugins/awesome-plugins/" title="插件" class="md-nav__link">插件</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13"><label class="md-nav__link" for="nav-13">示例</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-13">示例</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="https://github.com/dotnetcore/FlubuCore.Examples" title="Index" class="md-nav__link">Index</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14"><label class="md-nav__link" for="nav-14">English</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-14">English</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="https://flubucore.dotnetcore.xyz/" title="Index" class="md-nav__link">Index</a></li></ul></nav></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component="toc"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">目录</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#_1" title="概述" class="md-nav__link">概述</a></li><li class="md-nav__item"><a href="#_2" title="功能与优势" class="md-nav__link">功能与优势</a></li><li class="md-nav__item"><a href="#_3" title="入门" class="md-nav__link">入门</a></li><li class="md-nav__item"><a href="#_4" title="范例" class="md-nav__link">范例</a></li><li class="md-nav__item"><a href="#_5" title="疑惑？" class="md-nav__link">疑惑？</a></li><li class="md-nav__item"><a href="#_6" title="贡献" class="md-nav__link">贡献</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#_7" title="如何作出贡献" class="md-nav__link">如何作出贡献</a></li></ul></nav></li><li class="md-nav__item"><a href="#further-development" title="Further Development" class="md-nav__link">Further Development</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#backers-and-sponsors" title="Backers and Sponsors" class="md-nav__link">Backers and Sponsors</a></li></ul></nav></li><li class="md-nav__item"><a href="#_8" title="更新日志与路线图" class="md-nav__link">更新日志与路线图</a></li></ul></nav></div></div></div><div class="md-content"><article class="md-content__inner md-typeset"><a href="https://github.com/dotnetcore/FlubuCore/edit/master/docs/index.md" title="编辑此页" class="md-icon md-content__icon">&#xE3C9;</a><h1 id="flubucore">FlubuCore<a class="headerlink" href="#flubucore" title="Permanent link">&para;</a></h1>
<p><a href="http://lucidlynx.comtrade.com:8080/login?from=%2F"><img alt="Windows Build" src="http://lucidlynx.comtrade.com:8080/buildStatus/icon?job=FlubuCore" /></a>
<a href="https://travis-ci.org/dotnetcore/FlubuCore"><img alt="Travis" src="https://img.shields.io/travis/dotnetcore/FlubuCore.svg?branch=maste&amp;?style=flat-square&amp;label=linux-build" /></a>
<a href="https://www.nuget.org/packages/FlubuCore/"><img alt="NuGet Badge" src="https://buildstats.info/nuget/flubucore" /></a>
<a href="https://gitter.im/FlubuCore/Lobby?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img alt="Gitter" src="https://img.shields.io/gitter/room/FlubuCore/Lobby.svg" /></a>
<a href="https://twitter.com/FlubuC"><img alt="Twitter" src="https://img.shields.io/badge/twitter-flubucore-brightgreen.svg?logo=twitter" /></a>
<a href="https://github.com/dotnetcore"><img alt="Member project of .NET Core Community" src="https://img.shields.io/badge/member%20project%20of-NCC-9e20c9.svg" /></a>
<a href="https://github.com/dotnetcore/FlubuCore/blob/master/LICENSE"><img alt="License" src="https://img.shields.io/github/license/dotnetcore/FlubuCore.svg" /></a></p>
<h2 id="_1"><strong>概述</strong><a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>“FlubuCore - Fluent Builder Core”，跨平台的构建与部署自动化系统，通过直观的 Fluent 接口，使用 C# 定义构建和部署脚本。这使你的代码获得自动完成、IntelliSense、调试、FlubuCore 自定义分析器，以及在脚本中对整个 .NET 生态的原生性访问。</p>
<p><img alt="FlubuCore in action" src="https://raw.githubusercontent.com/flubu-core/flubu.core/master/assets/demo.gif" /></p>
<p>通过 roslyn 的强大赋能，FlubuCore 提供有 .NET/.NET Core 控制台应用程序用于编译和执行脚本。以上示例均可从控制台运行：</p>
<ul>
<li>FlubuCore runner <code>flubu.exe Default</code></li>
<li>FlubuCore dotnet cli tool <code>dotnet flubu Default</code></li>
<li>FlubuCore global tool <code>flubu Default</code></li>
</ul>
<h2 id="_2">功能与优势<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<ul>
<li>直观，易学。C#、流畅的 API 设计和 IntelliSense，使复杂脚本的构建变得举重若轻。</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="na">[FromArg(&quot;nugetKey&quot;, &quot;Nuget api key for publishing Flubu nuget packages.&quot;)]</span>
<span class="k">public</span> <span class="kt">string</span> <span class="n">NugetApiKey</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ConfigureTargets</span><span class="p">(</span><span class="n">ITaskContext</span> <span class="n">context</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">pack</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">CreateTarget</span><span class="p">(</span><span class="s">&quot;Pack&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">SetDescription</span><span class="p">(</span><span class="s">&quot;Prepare&#39;s nuget package.&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">AddCoreTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Pack</span><span class="p">()</span>
            <span class="p">.</span><span class="n">NoBuild</span><span class="p">()</span>
            <span class="p">.</span><span class="n">OutputDirectory</span><span class="p">(</span><span class="n">OutputDirectory</span><span class="p">)</span>
            <span class="p">.</span><span class="n">WithArguments</span><span class="p">(</span><span class="s">&quot;--force&quot;</span><span class="p">);</span> <span class="c1">//you can add your own custom arguments on each task</span>

    <span class="kt">var</span> <span class="n">branch</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">BuildSystems</span><span class="p">().</span><span class="n">Travis</span><span class="p">().</span><span class="n">Branch</span><span class="p">;</span>

    <span class="c1">//// Examine travis.yaml to see how to pass api key from travis to FlubuCore build script.</span>
    <span class="kt">var</span> <span class="n">nugetPush</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">CreateTarget</span><span class="p">(</span><span class="s">&quot;Nuget.publish&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">SetDescription</span><span class="p">(</span><span class="s">&quot;Publishes nuget package.&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">DependsOn</span><span class="p">(</span><span class="n">pack</span><span class="p">)</span>
        <span class="p">.</span><span class="n">AddCoreTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">NugetPush</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;{OutputDirectory}/NetCoreOpenSource.nupkg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="n">ServerUrl</span><span class="p">(</span><span class="s">&quot;https://www.nuget.org/api/v2/package&quot;</span><span class="p">)</span>
             <span class="p">.</span><span class="n">ApiKey</span><span class="p">(</span><span class="n">NugetApiKey</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="p">.</span><span class="n">When</span><span class="p">((</span><span class="n">c</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="n">BuildSystems</span><span class="p">().</span><span class="n">RunningOn</span> <span class="p">==</span> <span class="n">BuildSystemType</span><span class="p">.</span><span class="n">TravisCI</span>
                     <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">branch</span><span class="p">)</span>
                     <span class="p">&amp;&amp;</span> <span class="n">branch</span><span class="p">.</span><span class="n">EndsWith</span><span class="p">(</span><span class="s">&quot;stable&quot;</span><span class="p">,</span> <span class="n">StringComparison</span><span class="p">.</span><span class="n">OrdinalIgnoreCase</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<ul>
<li><a href="https://flubucore.dotnetcore.xyz/tasks/">内置大量常用任务</a>，如运行测试、versioning、管理 ISS、创建部署包（deployment packages）、发布 NuGet 包、docker 任务、 sql tasks, git tasks, 执行 PowerShell 脚本等。</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">context</span><span class="p">.</span><span class="n">CreateTarget</span><span class="p">(</span><span class="s">&quot;build&quot;</span><span class="p">)</span>
   <span class="p">.</span><span class="n">AddTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">GitVersionTask</span><span class="p">())</span>
   <span class="p">.</span><span class="n">AddTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">CompileSolutionTask</span><span class="p">(</span><span class="s">&quot;MySolution.sln&quot;</span><span class="p">).</span><span class="n">BuildConfiguration</span><span class="p">(</span><span class="s">&quot;Release&quot;</span><span class="p">);</span>

<span class="n">context</span><span class="p">.</span><span class="n">CreateTarget</span><span class="p">(</span><span class="s">&quot;run.tests&quot;</span><span class="p">)</span>
   <span class="p">.</span><span class="n">AddTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">XunitTaskByProjectName</span><span class="p">(</span><span class="s">&quot;MyProject&quot;</span><span class="p">).</span><span class="n">StopOnFail</span><span class="p">())</span>
   <span class="p">.</span><span class="n">AddTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">NUnitTask</span><span class="p">(</span><span class="n">NunitCmdOptions</span><span class="p">.</span><span class="n">V3</span><span class="p">,</span> <span class="s">&quot;MyProject2&quot;</span><span class="p">).</span><span class="n">ExcludeCategory</span><span class="p">(</span><span class="s">&quot;Linux&quot;</span><span class="p">))</span>
   <span class="p">.</span><span class="n">AddCoreTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">CoverletTask</span><span class="p">(</span><span class="s">&quot;MyProject.dll&quot;</span><span class="p">));</span>
</pre></div>
</td></tr></table>

<ul>
<li><a href="https://flubucore.dotnetcore.xyz/buildscript-fundamentals#Custom-code">执行自义定代码</a>。</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">context</span><span class="p">.</span><span class="n">CreateTarget</span><span class="p">(</span><span class="s">&quot;MyCustomBuildTarget&quot;</span><span class="p">)</span>
         <span class="p">.</span><span class="n">AddTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">CompileSolutionTask</span><span class="p">())</span>
         <span class="p">.</span><span class="n">Do</span><span class="p">((</span><span class="n">c</span><span class="p">)</span> <span class="p">=&gt;</span>
         <span class="p">{</span>
             <span class="c1">//// write your awesome code</span>
         <span class="p">})</span>
         <span class="p">.</span><span class="n">Do</span><span class="p">(</span><span class="n">NuGetPackageReferencingExample</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<ul>
<li>当脚本与项目文件一起使用时<a href="https://flubucore.dotnetcore.xyz/buildscript-fundamentals#Referencing-other-assemblies-in-build-script">会自动加载程序集引用和 NuGet 包</a>。当脚本单独执行（譬如在生产环境中使用 FlubuCore 脚本进行部署）时，可在特性（attributes）中添加引用（references）。</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="na">[NugetPackage(&quot;Newtonsoft.json&quot;, &quot;11.0.2&quot;)]</span>
<span class="na">[Assembly(&quot;.\Lib\EntityFramework.dll&quot;)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">BuildScript</span> <span class="p">:</span> <span class="n">DefaultBuildScript</span>
<span class="p">{</span>
   <span class="k">public</span> <span class="k">void</span> <span class="nf">NuGetPackageReferencingExample</span><span class="p">(</span><span class="n">ITaskContext</span> <span class="n">context</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">JsonConvert</span><span class="p">.</span><span class="n">SerializeObject</span><span class="p">(</span><span class="s">&quot;Example&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<ul>
<li><a href="https://flubucore.dotnetcore.xyz/buildscript-fundamentals#Run-any-program">在脚本中轻松运行任何外部程序（external program）或控制台命令（console command）</a>。</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span> <span class="k">public</span> <span class="k">class</span> <span class="nc">SimpleScript</span> <span class="p">:</span> <span class="n">DefaultBuildScript</span>
 <span class="p">{</span>
    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ConfigureTargets</span><span class="p">(</span><span class="n">ITaskContext</span> <span class="n">context</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">context</span><span class="p">.</span><span class="n">CreateTarget</span><span class="p">(</span><span class="s">&quot;Run.Libz&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">AddTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">RunProgramTask</span><span class="p">(</span><span class="s">@&quot;packages\LibZ.Tool\1.2.0\tools\libz.exe&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="n">WorkingFolder</span><span class="p">(</span><span class="s">@&quot;.\src&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="n">WithArguments</span><span class="p">(</span><span class="s">&quot;add&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="n">WithArguments</span><span class="p">(</span><span class="s">&quot;--libz&quot;</span><span class="p">,</span> <span class="s">&quot;Assemblies.libz&quot;</span><span class="p">));</span>
    <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table>

<ul>
<li><a href="https://flubucore.dotnetcore.xyz/buildscript-fundamentals#Script-arguments">将命令行参数（command line arguments）、json 配置文件或环境变量（environment variables）的设置传入脚本</a>。</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span> <span class="k">public</span> <span class="k">class</span> <span class="nc">SimpleScript</span> <span class="p">:</span> <span class="n">DefaultBuildScript</span>
 <span class="p">{</span>
<span class="na">    [FromArg(&quot;c&quot;, &quot;The configuration to use for building the project.&quot;)]</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Configuration</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="s">&quot;Release&quot;</span>

<span class="na">    [FromArg(&quot;sn&quot;, &quot;If true app is deployed on second node. Otherwise not.&quot;)]</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="n">deployOnSecondNode</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ConfigureTargets</span><span class="p">(</span><span class="n">ITaskContext</span> <span class="n">context</span><span class="p">)</span>
    <span class="p">{</span>
         <span class="n">context</span><span class="p">.</span><span class="n">CreateTarget</span><span class="p">(</span><span class="s">&quot;build&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="n">AddCoreTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Build</span><span class="p">()</span>
                <span class="p">.</span><span class="n">Configuration</span><span class="p">(</span><span class="n">Configuration</span><span class="p">)</span>
                <span class="p">.</span><span class="n">ForMember</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span>  <span class="n">x</span><span class="p">.</span><span class="n">Framework</span><span class="p">(</span><span class="s">&quot;net462&quot;</span><span class="p">),</span> <span class="s">&quot;f&quot;</span><span class="p">,</span> <span class="s">&quot;The target framework to build for.&quot;</span><span class="p">));</span> 
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  flubu build -c=Debug -f=netcoreapp2.0
</pre></div>
</td></tr></table>

<ul>
<li><a href="https://flubucore.dotnetcore.xyz/write-plugins">通过在 FlubuCore 插件中编写自己的任务来扩展 FlubuCore Fluent Api</a>。</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="k">public</span> <span class="k">class</span> <span class="nc">ExampleFlubuPluginTask</span> <span class="p">:</span> <span class="n">TaskBase</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">ExampleFlubuPluginTask</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="kt">int</span> <span class="nf">DoExecute</span><span class="p">(</span><span class="n">ITaskContextInternal</span> <span class="n">context</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Write your task logic here.</span>
            <span class="k">return</span> <span class="m">0</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</td></tr></table>

<ul>
<li>
<p><a href="https://flubucore.dotnetcore.xyz/AwesomePlugins/awesome-plugins/">不断丰富中的 FlubuCore 插件补充着内置任务</a>。</p>
</li>
<li>
<p><a href="https://flubucore.dotnetcore.xyz/buildscript-fundamentals#Async-execution">异步执行任务、目标依赖与自定义代码</a>。</p>
</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">context</span><span class="p">.</span><span class="n">CreateTarget</span><span class="p">(</span><span class="s">&quot;Run.Tests&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="n">AddTaskAsync</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">NUnitTaskForNunitV3</span><span class="p">(</span><span class="s">&quot;TestProjectName1&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="n">AddTaskAsync</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">NUnitTaskForNunitV3</span><span class="p">(</span><span class="s">&quot;TestProjectName1&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="n">AddTaskAsync</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">NUnitTaskForNunitV3</span><span class="p">(</span><span class="s">&quot;TestProjectName3&quot;</span><span class="p">));</span>
</pre></div>
</td></tr></table>

<ul>
<li><a href="https://flubucore.dotnetcore.xyz/override-add-options/">通过控制台程序为任务添加额外配置项（additional options），或对现有的配置项进行重写（override）</a></li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">context</span><span class="p">.</span><span class="n">CreateTarget</span><span class="p">(</span><span class="s">&quot;Example&quot;</span><span class="p">)</span><span class="err">`</span>
   <span class="p">.</span><span class="n">AddCoreTask</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Build</span><span class="p">(</span><span class="s">&quot;MySolution.sln&quot;</span><span class="p">).</span><span class="n">Configuration</span><span class="p">(</span><span class="s">&quot;Release&quot;</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<p><code>flubu example --configuration=Debug</code></p>
<p>flubu 将执行 <code>dotnet build MySolution.sln --configuration Debug</code></p>
<ul>
<li><a href="https://flubucore.dotnetcore.xyz/getting-started#getting-started-net-core">完整的 .NET Core 支持，包括全局 CLI 工具</a></li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    dotnet tool install --global FlubuCore.GlobalTool
    flubu compile
</pre></div>
</td></tr></table>

<ul>
<li><a href="https://flubucore.dotnetcore.xyz/Tests-debugging">可对构建脚本测试和调试</a></li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="n">context</span><span class="p">.</span><span class="n">WaitForDebugger</span><span class="p">();</span>
</pre></div>
</td></tr></table>

<ul>
<li>
<p><a href="https://flubucore.dotnetcore.xyz/WebApi/getting-started/">透过 FlubuCore Web API 轻松实现远程部署自动化</a></p>
</li>
<li>
<p><a href="https://github.com/flubu-core/examples/blob/master/NetCore_csproj/BuildScript/BuildScriptTests.cs">可在其他 .NET 应用程序中使用 FlubuCore 任务</a>。</p>
</li>
<li>
<p><a href="https://flubucore.dotnetcore.xyz/build-script-runner-interactive/">FlubuCore 交互模式（interactive mode）</a> 提供有 target 标签自动完成、选项标签自动完成、切换 target/options，以及命令执行历史。还可以执行外部命令和可操作程序。对于其中的一部分，FlubuCore 还提供了 Tab 键自动补全的功能（比如 dotnet、git 等）</p>
</li>
</ul>
<p><img alt="FlubuCore 交互模式" src="https://raw.githubusercontent.com/flubu-core/flubu.core/master/assets/FlubuCore_Interactive_mode_full.gif" /></p>
<ul>
<li>使用 FlubuCore 自定义分析器（FlubuCore custom analyzers）增强开发体验。</li>
</ul>
<p><img alt="执行中的 FlubuCore 分析器" src="https://raw.githubusercontent.com/flubu-core/flubu.core/master/assets/FlubuCoreCustomAnalyzerDemo.png" /></p>
<h2 id="_3"><strong>入门</strong><a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>FlubuCore 用起来非常简单:-) 而且她的文档也非常完整。</p>
<p><a href="https://flubucore.dotnetcore.xyz">FlubuCore 文档</a> 中的<a href="https://flubucore.dotnetcore.xyz/getting-started/">入门</a>一章将帮助你立即设置你的第一个 FlubuCore 构建。</p>
<p>可在<a href="https://flubucore.dotnetcore.xyz/buildscript-fundamentals">构建脚本的原理</a> 一章中查阅 FlubuCore 提供的完整功能列表。</p>
<p>一旦你定义了构建与部署脚本（build and deployment scripts），以下 Wiki 张杰将解释如何运行它们：</p>
<ul>
<li>针对 .NET Framework 项目，请使用 <a href="https://flubucore.dotnetcore.xyz/getting-started#Installation.net">FlubuCore.Runner</a></li>
<li>针对 .NET Core 项目，请使用 <a href="https://flubucore.dotnetcore.xyz/getting-started#Installation-.net-core">FlubuCore CLI global tool</a></li>
</ul>
<h2 id="_4"><strong>范例</strong><a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>除了 Wiki 的详细介绍外，FlubuCore 还提供了大量与真实情况相若的范例。这些例子可以在独立仓库 <a href="https://github.com/dotnetcore/FlubuCore.Examples/">Examples repository</a> 中找到。</p>
<p>这些示例有助于你快速入门 FlubuCore：</p>
<p>这些示例有助于你快速入门 FlubuCore：</p>
<ul>
<li>
<p><a href="https://github.com/dotnetcore/FlubuCore.Examples/blob/master/MVC_NET4.61/BuildScripts/BuildScript.cs">.NET Framework 构建示例</a> - Example covers versioning, building the project, running tests, packaging application for deployment.</p>
</li>
<li>
<p><a href="https://github.com/dotnetcore/FlubuCore.Examples/blob/master/NetCore_csproj/BuildScript/BuildScript.cs">.NET Core 构建示例</a> - Example covers versioning, building the project, running tests, packaging application for deployment.</p>
</li>
<li>
<p><a href="https://github.com/dotnetcore/FlubuCore.Examples/blob/master/DeployScriptExample/BuildScript/DeployScript.cs">部署脚本示例</a> - Example shows how to write simple deployment script. </p>
</li>
<li>
<p><a href="https://github.com/dotnetcore/FlubuCore.Examples/blob/master/NetCoreOpenSource/Build/BuildScript.cs">Open source library example</a> - Example covers versioning, building the project, running tests and publishing nuget package. It also covers how to run build script on Appveyor and Travis CI.</p>
</li>
</ul>
<h2 id="_5"><strong>疑惑？</strong><a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p><a href="https://gitter.im/FlubuCore/Lobby?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img alt="Join the chat at https://gitter.im/FlubuCore/Lobby" src="https://badges.gitter.im/mbdavid/LiteDB.svg" /></a></p>
<h2 id="_6"><strong>贡献</strong><a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>请移步阅读 <a href="https://github.com/dotnetcore/FlubuCore/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
<h3 id="_7"><strong>如何作出贡献</strong><a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<ul>
<li>为本项目做推广。</li>
<li>如果你对本项目感兴趣，请在右上角点击 star，以便壮大我们的社区。</li>
<li>改进文档</li>
<li>反馈、修正 Bug。</li>
<li>实现新功能。</li>
<li>讨论如何进一步改进项目。</li>
<li>改善项目的现有实现、性能等。</li>
</ul>
<h2 id="further-development">Further Development<a class="headerlink" href="#further-development" title="Permanent link">&para;</a></h2>
<p>If you find FlubuCore useful (you feel it helps you on the daily basis) you can support further development by buying us a coffee (or become a backer or sponsor). Sometimes it's hard to stay awake till midnight implementing new features, coffee helps us with that. We would really appreciate your support. Money from sponsorship will also be used for the promotion of the project. If you are a backer or a sponsor you can also request for a new feature or ask for support. These issues will be handled with highest priority.</p>
<p><a href="https://www.buymeacoffee.com/NCOpMkt"><img alt="" src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" /></a></p>
<h3 id="backers-and-sponsors">Backers and Sponsors<a class="headerlink" href="#backers-and-sponsors" title="Permanent link">&para;</a></h3>
<p><a href="https://opencollective.com/flubucore/order/12502"><img alt="OpenCollective" src="https://opencollective.com/flubucore/backers/badge.svg?style=for-the-badge" /></a> 
<a href="https://opencollective.com/flubucore/order/12503"><img alt="OpenCollective" src="https://opencollective.com/flubucore/sponsors/badge.svg?style=for-the-badge" /></a></p>
<h2 id="_8"><strong>更新日志与路线图</strong><a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<p>详细变更记录与示例请参阅<a href="https://github.com/dotnetcore/FlubuCore/blob/master/CHANGELOG.md">变更日志</a>。</p>
<p>FlubuCore 路线图请翻阅项目<a href="https://github.com/dotnetcore/FlubuCore/milestones">里程碑</a>。</p></article></div></div></main><footer class="md-footer"><div class="md-footer-nav"><nav class="md-footer-nav__inner md-grid"><a href="getting-started/" title="入门" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next"><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">前进</span>入门</span></div><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i></div></a></nav></div><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class="md-footer-copyright">powered by <a href="https://www.mkdocs.org">MkDocs</a> and <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a></div></div></div></footer></div><script src="assets/javascripts/application.b260a35d.js"></script><script src="assets/javascripts/lunr/lunr.stemmer.support.js"></script><script src="assets/javascripts/lunr/tinyseg.js"></script><script src="assets/javascripts/lunr/lunr.ja.js"></script><script>app.initialize({version:"1.0.4",url:{base:"."}})</script></body></html>